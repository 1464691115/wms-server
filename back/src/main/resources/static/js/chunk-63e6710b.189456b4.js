(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-63e6710b"],{"0683":function(t,e,i){"use strict";var a=i("972e"),n=i.n(a);n.a},"097d1":function(t,e,i){"use strict";var a=i("91dc"),n=i.n(a);n.a},"11f8":function(t,e,i){"use strict";var a=i("9f19"),n=i.n(a);n.a},"268f":function(t,e,i){t.exports=i("fde4")},"386b":function(t,e,i){var a=i("5ca1"),n=i("79e5"),o=i("be13"),s=/"/g,l=function(t,e,i,a){var n=String(o(t)),l="<"+e;return""!==i&&(l+=" "+i+'="'+String(a).replace(s,"&quot;")+'"'),l+">"+n+"</"+e+">"};t.exports=function(t,e){var i={};i[t]=e(l),a(a.P+a.F*n(function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}),"String",i)}},"461d":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"container",staticClass:"TablePanel h100p"},[i("div",{staticClass:"el-card box-card is-always-shadow"},[i("div",{staticClass:"flex-box flex-column ma-xs "},[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"table",staticStyle:{width:"100%"},attrs:{data:t.data,"max-height":t.height,border:"",height:t.fixHeight},on:{"selection-change":t.handleSelectionChange,"row-dblclick":t.dblClickRow,"sort-change":t.sortChange}},[t.showIndex?i("el-table-column",{attrs:{type:"index",fixed:"left",index:t.rowIndex,width:"60"}}):t._e(),t.showSelection?i("el-table-column",{attrs:{type:"selection",width:"43",fixed:"left"}}):t._e(),t.operateShow?i("el-table-column",{attrs:{label:"操作",fixed:t.fixed,width:t.operateWidth},scopedSlots:t._u([{key:"default",fn:function(e){return[t._t("operate",null,{row:e.row})]}}],null,!0)}):t._e(),t._t("default"),t.showAllWarehouse||t.showWarehouse?i("el-table-column",{attrs:{prop:"warehouseId",label:"仓库",sortable:t.sortable,width:"140","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[t._v("("+t._s(i.warehouseCode)+")"+t._s(i.warehouseName))]}}],null,!1,4108633078)}):t._e(),t.showAllWarehouse||t.showReservoir?i("el-table-column",{attrs:{prop:"reservoirId",label:"库区",sortable:t.sortable,width:"140","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[t._v("("+t._s(i.reservoirCode)+")"+t._s(i.reservoirName))]}}],null,!1,1558094134)}):t._e(),t.showAllWarehouse||t.showStock?i("el-table-column",{attrs:{prop:"stockId",label:"货架",sortable:t.sortable,width:"140","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[t._v("("+t._s(i.stockCode)+")"+t._s(i.stockName))]}}],null,!1,2707359478)}):t._e(),t.createUserShow?i("el-table-column",{attrs:{prop:"createUid",label:"创建人",sortable:t.sortable,width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[t._v(t._s(i.createUserName))]}}],null,!1,3588446509)}):t._e(),t.createUserShow?i("el-table-column",{attrs:{prop:"createTime",label:"创建时间",sortable:t.sortable,width:"140"}}):t._e(),t.updateUserShow?i("el-table-column",{attrs:{prop:"updateUid",label:"修改人",sortable:t.sortable,width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[t._v(t._s(i.updateUserName))]}}],null,!1,3179456632)}):t._e(),t.updateUserShow?i("el-table-column",{attrs:{prop:"updateTime",label:"修改时间",sortable:t.sortable,width:"140"}}):t._e()],2),i("div",{staticClass:"flex-box mt-xs flex-center"},[i("div",{staticClass:"flex-grow"}),i("div",{staticClass:"pr-sm"},[t._e(),t._t("buttons")],2),t.showPaginate?i("div",{},[i("el-pagination-use",{attrs:{paginate:t.paginate}})],1):t._e()])],1)])])},n=[],o=(i("d263"),i("7514"),i("ac6a"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"ElPaginationUse"},[i("el-pagination",{attrs:{"current-page":t.paginate.pageNum,"page-sizes":[t.paginate.perPageShow,30,50,100],"page-size":t.paginate.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.paginate.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)}),s=[],l=i("7f0d"),c={name:"ElPaginationUse",components:{},props:{paginate:{default:function(){return new l["a"]}}},data:function(){return{}},mounted:function(){this.reload()},methods:{reload:function(){},handleSizeChange:function(t){this.paginate.pageSize=t,this.paginate.changeSizeCallBack(),this.paginate.changeCallBack()},handleCurrentChange:function(t){this.paginate.jump(t),this.paginate.changePageCallBack(),this.paginate.changeCallBack()}},watch:{},computed:{}},r=c,u=(i("f7fa"),i("2877")),d=Object(u["a"])(r,o,s,!1,null,"6fcaa0c8",null),h=d.exports,f={isHidden:function(t){var e=window.getComputedStyle(t);return"none"===e.display}},p=i("8f16"),b=i("9960"),m={name:"TablePanel",components:{ElButtonMini:b["a"],ElPaginationUse:h},props:{data:{default:function(){return[]}},loading:{default:!1},paginate:{default:function(){return new l["a"]}},operateShow:{default:!0},fixed:{default:"left"},operateWidth:{default:"100"},selectedRow:{default:function(){return[]}},columnListWidth:{default:"120"},createUserShow:{default:!1},updateUserShow:{default:!1},showAllWarehouse:{default:!1},showWarehouse:{default:!1},showReservoir:{default:!1},showStock:{default:!1},showPaginate:{default:!0},fixHeight:{default:null},sortable:{default:"custom"},showIndex:{default:!0},showSelection:{default:!0}},data:function(){return{height:300,showColumnList:!1,checkFieldList:[],columns:[]}},mounted:function(){var t=this;this.reload(),this.columns=this.$refs.table.store.states.columns.concat([]),this.$nextTick(function(){t.resizeHeight()})},methods:{reload:function(){},resizeHeight:function(){var t=this;f.isHidden(this.$refs.container)||(this.height=0,this.$nextTick(function(){t.height=t.fixHeight?t.fixHeight:t.$refs.container.offsetHeight-70}))},handleSelectionChange:function(t){this.updateSelectedRow(t),this.$emit("selection-change",t)},rowIndex:function(t){return this.showPaginate?this.paginate.startRow+t:t+1},selectRows:function(){var t=this;this.data.forEach(function(e){t.$refs.table.toggleRowSelection(e,!!t.selectedRow.find(function(t){return t===e}))})},dblClickRow:function(t){this.updateSelectedRow(p["a"].mergeDiff(this.selectedRow,[t]))},updateSelectedRow:function(t){this.$emit("update:selectedRow",t)},sortChange:function(t,e,i){this.$emit("sort-change",t,e,i)},hiddenField:function(){document.querySelectorAll("."+this.columns[0].id).forEach(function(t){t.style.visiblity="hidden"})},doLayOut:function(){this.$refs.table.doLayout()}},watch:{data:function(){this.resizeHeight()},selectedRow:function(){this.selectRows()},checkFieldList:function(t){this.hiddenField()}},computed:{resize:function(){return this.$store.state.searchShowHidden},columnListCheckbox:function(){return this.columns.filter(function(t){return"default"===t.type&&!t.fixed}).map(function(t){return t.label})}}},g=m,w=(i("aeef"),Object(u["a"])(g,a,n,!1,null,"52728eca",null));e["a"]=w.exports},"558e":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"ElButtonCurdGroup"},[i("el-button-group",[i("el-button-mini",{attrs:{icon:"add",disabled:t.addDisabled},nativeOn:{click:function(e){return t.$emit("click-add")}}},[t._v("添加")]),i("el-button-mini",{attrs:{icon:"edit",disabled:t.editDisabled},nativeOn:{click:function(e){return t.$emit("click-edit")}}},[t._v("编辑")]),i("el-button-mini",{attrs:{icon:"delete",disabled:t.deleteDisabled},nativeOn:{click:function(e){return t.$emit("click-delete")}}},[t._v("删除")])],1),t._t("default")],2)},n=[],o=i("9960"),s={name:"ElButtonCurdGroup",components:{ElButtonMini:o["a"]},props:{addDisabled:{default:!1},editDisabled:{default:!1},deleteDisabled:{default:!1}},data:function(){return{}},mounted:function(){this.reload()},methods:{reload:function(){}},watch:{},computed:{}},l=s,c=(i("fe0a"),i("2877")),r=Object(c["a"])(l,a,n,!1,null,"c8b3903c",null);e["a"]=r.exports},5759:function(t,e,i){},"7f0d":function(t,e,i){"use strict";i.d(e,"a",function(){return s});var a=i("d225"),n=i("b0b4"),o=i("bd86"),s=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:14;Object(a["a"])(this,t),Object(o["a"])(this,"lastPage",1),Object(o["a"])(this,"pageNum",0),Object(o["a"])(this,"pageSize",0),Object(o["a"])(this,"size",0),Object(o["a"])(this,"total",0),Object(o["a"])(this,"startRow",0),Object(o["a"])(this,"perPageShow",0),e&&(this.changeCallBack=function(){e()}),this.pageSize=i,this.perPageShow=i}return Object(n["a"])(t,[{key:"next",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.jump(t||this.pageNum+1)}},{key:"jump",value:function(t){this.pageNum=t>this.lastPage?this.lastPage:t}},{key:"jumpToLast",value:function(){this.pageNum=this.lastPage}},{key:"setPaginate",value:function(t){this.lastPage=t.lastPage,this.pageNum=t.pageNum,this.pageSize=t.pageSize,this.size=t.size,this.startRow=t.startRow,this.total=t.total}},{key:"getJSON",value:function(){return{pageNum:this.pageNum,pageSize:this.pageSize}}},{key:"changePageCallBack",value:function(){}},{key:"changeSizeCallBack",value:function(){}},{key:"changeCallBack",value:function(){}}]),t}()},"7f7f":function(t,e,i){var a=i("86cc").f,n=Function.prototype,o=/^\s*function ([^ (]*)/,s="name";s in n||i("9e1e")&&a(n,s,{configurable:!0,get:function(){try{return(""+this).match(o)[1]}catch(t){return""}}})},8135:function(t,e,i){},"81d3":function(t,e,i){"use strict";var a=i("8135"),n=i.n(a);n.a},"829a":function(t,e,i){},"91dc":function(t,e,i){},"972e":function(t,e,i){},"9f19":function(t,e,i){},a03d:function(t,e,i){},aacc:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"RoleManagerView flex-box flex-column"},[i("search-card-layout",{attrs:{"default-show":!1,title:"角色查询与操作"},on:{"click-search":t.refreshData}},[i("div",{staticClass:"flex-box flex-center search-card"},[i("div",{},[i("span",[t._v("角色名称")]),i("el-input",{model:{value:t.filterForm.name,callback:function(e){t.$set(t.filterForm,"name",e)},expression:"filterForm.name"}})],1)]),i("div",{attrs:{slot:"buttons"},slot:"buttons"},[i("el-button-curd-group",{attrs:{"delete-disabled":!t.selectedRow.length,"edit-disabled":1!==t.selectedRow.length},on:{"click-add":t.clickAddButton,"click-edit":t.clickEditButton,"click-delete":t.clickDeleteButton}})],1)]),i("div",{staticClass:"flex-grow mb-xs"},[i("div",{staticClass:"flex-box h100p "},[i("div",{staticClass:"flex-grow overflow-h "},[i("table-panel",{attrs:{loading:t.loading,data:t.data,paginate:t.paginate,"operate-width":"80",selectedRow:t.selectedRow,"create-user-show":!0,"update-user-show":!0},on:{"update:selectedRow":function(e){t.selectedRow=e},"update:selected-row":function(e){t.selectedRow=e},"sort-change":t.sortChange},scopedSlots:t._u([{key:"operate",fn:function(e){var a=e.row;return[i("el-button-mini",{attrs:{type:"text",icon:"edit"},nativeOn:{click:function(e){return t.clickRowEditButton(a)}}}),i("el-button-mini",{attrs:{type:"text",icon:"delete"},nativeOn:{click:function(e){return t.clickRowDeleteButton(a)}}})]}}])},[i("el-table-column",{attrs:{prop:"id",label:"ID",sortable:"custom",width:"80"}}),i("el-table-column",{attrs:{prop:"name",label:"角色名称",sortable:"custom","min-width":"140"}})],1)],1),i("div",{staticClass:"flex-shrink-off ml-xs  ",staticStyle:{width:"300px","max-height":"100%"}},[i("window-card-layout",{attrs:{title:"权限编辑"}},[i("auth-manager-content")],1)],1)]),i("role-add-dialog",{attrs:{visible:t.showAddDialog,"edit-id":t.editId},on:{"update:visible":function(e){t.showAddDialog=e},finish:t.addDialogFinish}})],1)],1)},n=[],o=(i("7f7f"),i("cebc")),s=i("b4d6"),l=i("d225"),c=i("bd86"),r=function t(){Object(l["a"])(this,t),Object(c["a"])(this,"id",0),Object(c["a"])(this,"name",""),Object(c["a"])(this,"remark",""),Object(c["a"])(this,"createUid",""),Object(c["a"])(this,"updateUid",""),Object(c["a"])(this,"createTime",""),Object(c["a"])(this,"updateTime",""),Object(c["a"])(this,"createUserName",""),Object(c["a"])(this,"updateUserName",""),Object(c["a"])(this,"auths",[])},u=i("558e"),d=i("461d"),h=i("7f0d"),f=i("1812"),p=i("9960"),b=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"AuthManagerContent overflow-h"},[t.isSelect?t._e():i("div",{},[i("el-button-curd-group",{attrs:{"edit-disabled":1!==t.selectedNodes.length,"delete-disabled":t.selectedNodes.length<1},on:{"click-add":t.clickAddButton,"click-edit":t.clickEditButton,"click-delete":t.clickDeleteButton}})],1),i("div",{staticClass:"mt-xs",staticStyle:{"max-height":"400px","overflow-y":"auto"}},[i("el-tree",{ref:"tree",attrs:{data:t.dataTree,"show-checkbox":"","default-expand-all":"","expand-on-click-node":!1,"node-key":"id","highlight-current":"",props:t.defaultProps},on:{"check-change":t.checkChange},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.node,n=e.data;return i("div",{staticClass:"flex-box flex-center fz-xs w100p"},[i("div",{staticClass:"flex-grow"},[t._v(t._s(a.label))]),t.isSelect?t._e():i("div",[0===n.pid?i("el-button-mini",{attrs:{type:"text",icon:"add"},nativeOn:{click:function(e){return t.clickRowAddButton(n)}}}):t._e(),i("el-button-mini",{attrs:{type:"text",icon:"edit"},nativeOn:{click:function(e){return t.clickRowEditButton(n)}}}),i("el-button-mini",{attrs:{type:"text",icon:"delete"},nativeOn:{click:function(e){return t.clickRowDeleteButton(n)}}})],1)])}}])})],1),i("auth-add-dialog",{attrs:{visible:t.showAddDialog,"edit-id":t.editId,"edit-pid":t.editPid},on:{"update:visible":function(e){t.showAddDialog=e},finish:t.addDialogFinish}})],1)},m=[],g=i("8f16"),w={_defDelay:100,_thrKey:{},_debKey:{},_onceKey:{},once:function(t,e){this._onceKey[t]||(this._onceKey[t]=!0,e&&e())},throttle:function(t,e){var i=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this._defDelay;this._thrKey[t]||(this._thrKey[t]=!0,e&&e(),setTimeout(function(){i._thrKey[t]=!1},a))},debounce:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this._defDelay+1;this._debKey[t]&&clearTimeout(this._debKey[t]),this._debKey[t]=setTimeout(function(){e&&e()},i)},thrAndDeb:function(t,e,i){i=null===i?100:i,this.throttle(t,e,i),this.debounce(t,e,i)},throttleFunction:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._defDelay,i=!0;return function(){i&&(i=!1,t&&t.apply(void 0,arguments),setTimeout(function(){i=!0},e))}},debounceFuntion:function(t){var e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._defDelay+1;return function(){for(var a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];clearTimeout(e),e=setTimeout(function(){t&&t.apply(void 0,n)},i)}},thrAndDebFuntion:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=this.throttle(t,e),n=this.debounce(t,i);return function(){a.apply(void 0,arguments),n.apply(void 0,arguments)}}},v=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"AuthAddDialog"},[i("el-dialog",{attrs:{visible:t.visible,width:"300px",title:t.editId?"编辑 "+t.auth.id:"新增"},on:{"update:visible":t.showDialog}},[i("el-form",{attrs:{"label-position":"top"}},[i("el-form-item",{attrs:{label:"权限名称"}},[i("el-input",{attrs:{type:"text"},model:{value:t.auth.name,callback:function(e){t.$set(t.auth,"name",e)},expression:"auth.name"}})],1),i("el-form-item",{attrs:{label:"权限所属"}},[i("el-select",{model:{value:t.auth.pid,callback:function(e){t.$set(t.auth,"pid",e)},expression:"auth.pid"}},[i("el-option",{attrs:{label:"顶级分类",value:0}}),t._l(t.authList,function(t){return i("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})],2)],1),i("el-form-item",{attrs:{label:"权限地址"}},[i("el-input",{attrs:{type:"text"},model:{value:t.auth.url,callback:function(e){t.$set(t.auth,"url",e)},expression:"auth.url"}})],1)],1),i("el-button-submit",{staticStyle:{"margin-top":"20px"},attrs:{size:"small",loading:t.submitting},nativeOn:{click:function(e){return t.clickSubmitButton(e)}}},[t._v("保存提交\n        ")])],1)],1)},x=[],k=function t(){Object(l["a"])(this,t),Object(c["a"])(this,"id",0),Object(c["a"])(this,"pid",0),Object(c["a"])(this,"name",""),Object(c["a"])(this,"url","")},_=i("b5d0"),C=i("705a"),y={name:"AuthAddDialog",components:{ElButtonSubmit:_["a"]},props:{visible:{default:!1},editId:{default:0},editPid:{default:0}},data:function(){return{auth:new k,authList:[],submitting:!1}},mounted:function(){this.reload()},methods:{reload:function(){},showDialog:function(t){this.$emit("update:visible",t)},refreshData:function(){var t=this;if(0===this.editId)return this.auth=new k,void(this.auth.pid=this.editPid);this.$ajax.request(f["a"].role_auth.getAuthById,{id:this.editId}).then(function(e){t.auth=e})},refreshAuthList:function(){var t=this;this.$ajax.request(f["a"].role_auth.authAll,{pid:0}).then(function(e){t.authList=e.filter(function(e){return e.id!==t.editId})})},clickSubmitButton:function(){var t=this;this.submitting=!0;var e=this.editId?f["a"].role_auth.authUpdate:f["a"].role_auth.authInsert;this.$ajax.request(e,this.auth).then(function(e){C["a"].toastSuccess(e),t.showDialog(!1),t.$emit("finish")}).finally(function(){return t.submitting=!1})}},watch:{visible:function(t){t&&(this.refreshData(),this.refreshAuthList())}},computed:{}},S=y,D=(i("097d1"),i("2877")),j=Object(D["a"])(S,v,x,!1,null,"d9e2a610",null),O=j.exports,B={name:"AuthManagerContent",components:{AuthAddDialog:O,ElButtonCurdGroup:u["a"],ElButtonMini:p["a"]},props:{isSelect:{default:!1}},data:function(){return{showAddDialog:!1,data:[],defaultProps:{children:"children",label:"name"},form:{name:""},selectedNodes:[],editId:0,editPid:0}},mounted:function(){this.reload()},methods:{reload:function(){this.refreshData()},refreshData:function(){var t=this;this.$ajax.request(f["a"].role_auth.authAll,this.form).then(function(e){t.data=e})},checkChange:function(){var t=this;w.debounce("checkChange"+this.uid,function(){t.selectedNodes=t.$refs.tree.getCheckedNodes(),t.$emit("check-change",t.selectedNodes)})},clickAddButton:function(){this.editId=0,this.showAddDialog=!0},clickEditButton:function(){this.editId=this.selectedNodes[0].id,this.showAddDialog=!0},clickDeleteButton:function(){this.delete(this.selectedNodes)},clickRowDeleteButton:function(t){this.delete([t])},clickRowAddButton:function(t){this.editPid=t.id,this.showAddDialog=!0},clickRowEditButton:function(t){this.editId=t.id,this.showAddDialog=!0},delete:function(t){var e=this;C["a"].confirm("\n                确定要删除以下权限吗？ <br>\n                [ ".concat(t.map(function(t){return t.name})," ]\n            ")).then(function(){return e.$ajax.request(f["a"].role_auth.authDelete,{ids:t.map(function(t){return t.id}).join(",")})}).then(function(t){C["a"].toastSuccess(t),e.refreshData()})},addDialogFinish:function(){this.refreshData(),this.editPid=0,this.editId=0},setCheckedKeys:function(t){this.$refs.tree.setCheckedKeys(t)}},watch:{},computed:{dataTree:function(){return g["a"].listToTree(this.data)}}},$=B,A=(i("0683"),Object(D["a"])($,b,m,!1,null,"0a1fb46b",null)),R=A.exports,I=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"WindowCardLayout"},[i("div",{staticClass:"el-card box-card is-always-shadow"},[i("div",{staticClass:"header flex-box flex-center el-card__header",attrs:{onselectstart:"return false"}},[i("div",{staticClass:"flex-grow"},[t._v(t._s(t.title))])]),i("div",{staticClass:"body pl-sm pr-sm pt-xs pb-xs "},[t._t("default")],2)])])},E=[],P={name:"WindowCardLayout",components:{},props:{title:{default:""}},data:function(){return{}},mounted:function(){this.reload()},methods:{reload:function(){}},watch:{},computed:{}},N=P,z=(i("c97d"),Object(D["a"])(N,I,E,!1,null,"ac179b3e",null)),L=z.exports,T=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"RoleAddDialog"},[i("el-dialog",{attrs:{visible:t.visible,width:"320px",title:t.editId?"编辑 "+t.editId:"新增"},on:{"update:visible":t.showDialog}},[i("el-form",{attrs:{"label-position":"top"}},[i("el-form-item",{attrs:{label:"角色名称"}},[i("el-input",{attrs:{type:"text"},model:{value:t.role.name,callback:function(e){t.$set(t.role,"name",e)},expression:"role.name"}})],1),i("el-form-item",{attrs:{label:"选择权限"}},[i("auth-manager-content",{ref:"tree",attrs:{"is-select":!0},on:{"check-change":t.checkChange}})],1)],1),i("el-button-submit",{staticClass:"mt-md",attrs:{size:"small"},nativeOn:{click:function(e){return t.clickSubmitButton(e)}}},[t._v("保存提交\n        ")])],1)],1)},F=[],U={name:"RoleAddDialog",components:{ElButtonSubmit:_["a"],AuthManagerContent:R},props:{visible:{default:!1},editId:{default:0}},data:function(){return{role:new r}},mounted:function(){this.reload()},methods:{reload:function(){},showDialog:function(t){this.$emit("update:visible",t)},refreshData:function(){var t=this;if(!this.editId)return this.role=new r,void this.$refs.tree.setCheckedKeys([]);this.$ajax.request(f["a"].role_auth.getRoleById,{id:this.editId}).then(function(e){t.role=e,t.role.auths=t.role.auths||[],t.$refs.tree.setCheckedKeys(t.role.auths.map(function(t){return t.id}))})},clickSubmitButton:function(){var t=this,e=this.editId?f["a"].role_auth.roleUpdate:f["a"].role_auth.roleInsert;this.$ajax.request(e,this.role).then(function(e){C["a"].toastSuccess(e),t.showDialog(!1),t.$emit("finish")})},checkChange:function(t){this.role.auths=t}},watch:{visible:function(t){t&&this.refreshData()}},computed:{}},K=U,H=(i("11f8"),Object(D["a"])(K,T,F,!1,null,"870191cc",null)),W=H.exports,q=i("41a2"),M={name:"RoleManagerView",components:{RoleAddDialog:W,WindowCardLayout:L,AuthManagerContent:R,ElButtonMini:p["a"],TablePanel:d["a"],ElButtonCurdGroup:u["a"],SearchCardLayout:s["a"]},props:{},data:function(){return{loading:!0,showAddDialog:!1,filterForm:new r,data:[],paginate:new h["a"](this.refreshData),selectedRow:[],sortingColumn:null,editId:0}},mounted:function(){this.reload()},methods:{reload:function(){this.refreshData()},refreshData:function(){var t=this;this.loading=!0,this.$ajax.request(f["a"].role_auth.roleList,Object(o["a"])({},this.paginate.getJSON(),this.filterForm,q["a"].getSortField(this.sortingColumn))).then(function(e){t.data=e.list,t.paginate.setPaginate(e)}).finally(function(){return t.loading=!1})},clickAddButton:function(){this.editId=0,this.showAddDialog=!0},clickEditButton:function(){this.editId=this.selectedRow[0].id,this.showAddDialog=!0},clickDeleteButton:function(){this.delete(this.selectedRow)},clickRowEditButton:function(t){this.editId=t.id,this.showAddDialog=!0},clickRowDeleteButton:function(t){this.delete([t])},delete:function(t){var e=this;C["a"].confirm("\n                确定删除以下角色？ <br>\n                [ ".concat(t.map(function(t){return t.name}).join(",")," ]\n            ")).then(function(){return e.$ajax.request(f["a"].role_auth.roleDelete,{ids:t.map(function(t){return t.id}).join(",")})}).then(function(t){C["a"].toastSuccess(t),e.refreshData()})},sortChange:function(t){var e=this;this.sortingColumn=t,this.$nextTick(function(){return e.refreshData()})},addDialogFinish:function(){this.editId=0,this.refreshData()}},watch:{},computed:{}},G=M,J=(i("81d3"),Object(D["a"])(G,a,n,!1,null,"6d906c41",null));e["default"]=J.exports},aeef:function(t,e,i){"use strict";var a=i("a03d"),n=i.n(a);n.a},b13f:function(t,e,i){},b494:function(t,e,i){"use strict";var a=i("829a"),n=i.n(a);n.a},b4d6:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"SearchCardLayout pb-xs"},[i("div",{staticClass:"el-card box-card is-always-shadow"},[i("div",{staticClass:"header flex-box flex-center el-card__header",attrs:{onselectstart:"return false"},on:{dblclick:function(e){t.show=!t.show}}},[i("div",{staticClass:"flex-grow"},[t._v(t._s(t.title))]),i("div",{staticClass:"trans",class:t.showButtonClass},[i("a",{attrs:{href:"javascript:;"},on:{click:function(e){t.show=!t.show}}},[i("i",{staticClass:"iconfont icon-chevron-up"})])])]),i("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"body pl-sm pr-sm pt-xs "},[t._t("default")],2),i("div",{staticClass:"pl-sm pr-sm pt-xs pb-xs"},[i("div",{staticClass:"flex-box flex-center"},[i("div",{staticClass:"flex-grow"},[t._t("buttons")],2),i("div",{},[i("el-button",{attrs:{icon:"el-icon-search",loading:t.loading},nativeOn:{click:function(e){return t.$emit("click-search")}}},[t._v("查询\n                    ")])],1)])])])])},n=[],o=i("9960"),s=i("7f0d"),l={name:"SearchCardLayout",components:{ElButtonMini:o["a"]},props:{title:{default:"功能选项"},loading:{default:!1},paginate:{default:function(){return new s["a"]}},defaultShow:{default:!0}},data:function(){return{show:this.defaultShow}},mounted:function(){this.reload()},methods:{reload:function(){}},watch:{show:function(t){this.$store.dispatch("setSearchShowHidden",t)}},computed:{showButtonClass:function(){return{show:!this.show}}}},c=l,r=(i("b494"),i("2877")),u=Object(r["a"])(c,a,n,!1,null,"2d764fc7",null);e["a"]=u.exports},b869:function(t,e,i){},bf90:function(t,e,i){var a=i("36c3"),n=i("bf0b").f;i("ce7e")("getOwnPropertyDescriptor",function(){return function(t,e){return n(a(t),e)}})},c97d:function(t,e,i){"use strict";var a=i("b869"),n=i.n(a);n.a},cebc:function(t,e,i){"use strict";i.d(e,"a",function(){return u});var a=i("268f"),n=i.n(a),o=i("e265"),s=i.n(o),l=i("a4bb"),c=i.n(l),r=i("bd86");function u(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{},a=c()(i);"function"===typeof s.a&&(a=a.concat(s()(i).filter(function(t){return n()(i,t).enumerable}))),a.forEach(function(e){Object(r["a"])(t,e,i[e])})}return t}},d263:function(t,e,i){"use strict";i("386b")("fixed",function(t){return function(){return t(this,"tt","","")}})},e265:function(t,e,i){t.exports=i("ed33")},ed33:function(t,e,i){i("014b"),t.exports=i("584a").Object.getOwnPropertySymbols},f7fa:function(t,e,i){"use strict";var a=i("5759"),n=i.n(a);n.a},fde4:function(t,e,i){i("bf90");var a=i("584a").Object;t.exports=function(t,e){return a.getOwnPropertyDescriptor(t,e)}},fe0a:function(t,e,i){"use strict";var a=i("b13f"),n=i.n(a);n.a}}]);
//# sourceMappingURL=chunk-63e6710b.189456b4.js.map