(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0f92a9bc"],{"00fd":function(e,t,i){"use strict";i.d(t,"a",function(){return s});var a=i("d225"),n=i("bd86"),s=function e(){Object(a["a"])(this,e),Object(n["a"])(this,"id",0),Object(n["a"])(this,"code",""),Object(n["a"])(this,"name",""),Object(n["a"])(this,"createUid",""),Object(n["a"])(this,"updateUid",""),Object(n["a"])(this,"createTime",""),Object(n["a"])(this,"updateTime",""),Object(n["a"])(this,"createUserName",""),Object(n["a"])(this,"updateUserName","")}},"53a0":function(e,t,i){},"558e":function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"ElButtonCurdGroup"},[i("el-button-group",[i("el-button-mini",{attrs:{icon:"add",disabled:e.addDisabled},nativeOn:{click:function(t){return e.$emit("click-add")}}},[e._v("添加")]),i("el-button-mini",{attrs:{icon:"edit",disabled:e.editDisabled},nativeOn:{click:function(t){return e.$emit("click-edit")}}},[e._v("编辑")]),i("el-button-mini",{attrs:{icon:"delete",disabled:e.deleteDisabled},nativeOn:{click:function(t){return e.$emit("click-delete")}}},[e._v("删除")])],1),e._t("default")],2)},n=[],s=i("9960"),r={name:"ElButtonCurdGroup",components:{ElButtonMini:s["a"]},props:{addDisabled:{default:!1},editDisabled:{default:!1},deleteDisabled:{default:!1}},data:function(){return{}},mounted:function(){this.reload()},methods:{reload:function(){}},watch:{},computed:{}},o=r,l=(i("fe0a"),i("2877")),c=Object(l["a"])(o,a,n,!1,null,"c8b3903c",null);t["a"]=c.exports},"73b5":function(e,t,i){"use strict";i.d(t,"a",function(){return s});var a=i("d225"),n=i("bd86"),s=(i("5701"),function e(){Object(a["a"])(this,e),Object(n["a"])(this,"createUid",0),Object(n["a"])(this,"updateUid",0),Object(n["a"])(this,"createTime",""),Object(n["a"])(this,"updateTime",""),Object(n["a"])(this,"createUserName",""),Object(n["a"])(this,"updateUserName","")})},"77ea":function(e,t,i){},7851:function(e,t,i){"use strict";var a=i("f359"),n=i.n(a);n.a},"7f7f":function(e,t,i){var a=i("86cc").f,n=Function.prototype,s=/^\s*function ([^ (]*)/,r="name";r in n||i("9e1e")&&a(n,r,{configurable:!0,get:function(){try{return(""+this).match(s)[1]}catch(e){return""}}})},b13f:function(e,t,i){},cbbb:function(e,t,i){"use strict";var a=i("53a0"),n=i.n(a);n.a},d60c:function(e,t,i){"use strict";var a=i("77ea"),n=i.n(a);n.a},ec22:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"WarehouseManagerView flex-box flex-column"},[i("search-card-layout",{attrs:{loading:e.loading},on:{"click-search":e.refreshData}},[i("div",{staticClass:"flex-box search-card"},[i("div",{},[i("span",[e._v("仓库编号")]),i("el-input",{model:{value:e.filterForm.code,callback:function(t){e.$set(e.filterForm,"code",t)},expression:"filterForm.code"}})],1),i("div",{},[i("span",[e._v("仓库名称")]),i("el-input",{model:{value:e.filterForm.name,callback:function(t){e.$set(e.filterForm,"name",t)},expression:"filterForm.name"}})],1)]),i("el-button-curd-group",{attrs:{slot:"buttons","delete-disabled":!e.selectedRow.length,"edit-disabled":1!==e.selectedRow.length},on:{"click-add":e.clickAddButton,"click-edit":e.clickEditButton,"click-delete":e.clickDeleteButton},slot:"buttons"})],1),i("div",{staticClass:"flex-grow"},[i("table-panel",{attrs:{loading:e.loading,data:e.data,paginate:e.paginate,"operate-width":"80",selectedRow:e.selectedRow,"create-user-show":!0,"update-user-show":!0},on:{"update:selectedRow":function(t){e.selectedRow=t},"update:selected-row":function(t){e.selectedRow=t},"sort-change":e.sortChange},scopedSlots:e._u([{key:"operate",fn:function(t){var a=t.row;return[i("el-button-mini",{attrs:{type:"text",icon:"edit"},nativeOn:{click:function(t){return e.clickRowEditButton(a)}}}),i("el-button-mini",{attrs:{type:"text",icon:"delete"},nativeOn:{click:function(t){return e.clickRowDeleteButton(a)}}})]}}])},[i("el-table-column",{attrs:{prop:"id",label:"ID",sortable:"custom",width:"80"}}),i("el-table-column",{attrs:{prop:"code",label:"仓库编号",sortable:"custom",width:"120"}}),i("el-table-column",{attrs:{prop:"name",label:"仓库名称",sortable:"custom",width:"160"}})],1)],1),i("warehouse-add-dialog",{attrs:{visible:e.showAddDialog,"edit-id":e.editId},on:{"update:visible":function(t){e.showAddDialog=t},finish:e.refreshData}})],1)},n=[],s=(i("7f7f"),i("cebc")),r=i("b4d6"),o=i("1812"),l=i("41a2"),c=i("705a"),u=i("7f0d"),d=i("d225"),h=i("308d"),f=i("6bb5"),b=i("013f"),m=i("4e2b"),p=i("bd86"),w=i("73b5"),v=function(e){function t(){var e,i;Object(d["a"])(this,t);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return i=Object(h["a"])(this,(e=Object(f["a"])(t)).call.apply(e,[this].concat(n))),Object(p["a"])(Object(b["a"])(i),"id",0),Object(p["a"])(Object(b["a"])(i),"code",""),Object(p["a"])(Object(b["a"])(i),"name",""),Object(p["a"])(Object(b["a"])(i),"remark",""),i}return Object(m["a"])(t,e),t}(w["a"]),g=i("558e"),j=i("461d"),k=i("9960"),O=i("f8d6"),D=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"WarehouseAddDialog"},[i("el-dialog",{attrs:{visible:e.visible,width:"300px",title:e.editId?"编辑 "+e.warehouse.id:"新增"},on:{"update:visible":e.showDialog}},[i("el-form",{attrs:{"label-position":"top"}},[i("el-form-item",{attrs:{label:"仓库编号"}},[i("el-input",{attrs:{type:"text"},model:{value:e.warehouse.code,callback:function(t){e.$set(e.warehouse,"code",t)},expression:"warehouse.code"}})],1),i("el-form-item",{attrs:{label:"仓库名称"}},[i("el-input",{attrs:{type:"text"},model:{value:e.warehouse.name,callback:function(t){e.$set(e.warehouse,"name",t)},expression:"warehouse.name"}})],1),i("el-form-item",{attrs:{label:"备注"}},[i("el-input",{attrs:{type:"textarea"},model:{value:e.warehouse.remark,callback:function(t){e.$set(e.warehouse,"remark",t)},expression:"warehouse.remark"}})],1)],1),i("div",{staticClass:"mt-md"},[i("el-button-submit",{attrs:{loading:e.loading,size:"small"},nativeOn:{click:function(t){return e.clickSubmit(t)}}},[e._v("\n                保存提交\n            ")])],1)],1)],1)},x=[],$=(i("00fd"),i("b5d0")),y={name:"WarehouseAddDialog",components:{ElButtonSubmit:$["a"]},props:{visible:{default:!1},editId:{default:0}},data:function(){return{warehouse:new v,loading:!1}},mounted:function(){this.reload()},methods:{reload:function(){},showDialog:function(e){this.$emit("update:visible",e)},refreshData:function(){var e=this;if(!this.editId)return this.warehouse=new v;this.loading=!0,this.$ajax.request(o["a"].warehouse.warGetById,{id:this.editId}).then(function(t){e.warehouse=t}).finally(function(){return e.loading=!1})},clickSubmit:function(){var e=this,t=this.editId?o["a"].warehouse.warUpdate:o["a"].warehouse.warInsert;this.loading=!0,this.$ajax.request(t,this.warehouse).then(function(t){c["a"].toastSuccess(t),e.showDialog(!1),e.$emit("finish")}).finally(function(){return e.loading=!1})}},watch:{visible:function(e){e&&this.refreshData()}},computed:{}},B=y,F=(i("cbbb"),i("2877")),I=Object(F["a"])(B,D,x,!1,null,"5ae80170",null),A=I.exports,C={name:"WarehouseManagerView",components:{WarehouseAddDialog:A,WarehouseSelector:O["a"],ElButtonMini:k["a"],TablePanel:j["a"],ElButtonCurdGroup:g["a"],SearchCardLayout:r["a"]},props:{},data:function(){return{loading:!1,showAddDialog:!1,filterForm:new v,data:[],paginate:new u["a"](this.refreshData),selectedRow:[],sortingColumn:null,editId:0}},mounted:function(){this.reload()},methods:{reload:function(){this.refreshData()},refreshData:function(){var e=this;this.loading=!0,this.$ajax.request(o["a"].warehouse.warList,Object(s["a"])({},l["a"].getSortField(this.sortingColumn),this.paginate.getJSON(),this.filterForm)).then(function(t){e.data=t.list,e.paginate.setPaginate(t)}).finally(function(){return e.loading=!1})},sortChange:function(e){this.sortingColumn=e,this.refreshData()},clickAddButton:function(){this.editId=0,this.showAddDialog=!0},clickEditButton:function(){this.editId=this.selectedRow[0].id,this.showAddDialog=!0},clickDeleteButton:function(){this.delete(this.selectedRow)},clickRowEditButton:function(e){this.editId=e.id,this.showAddDialog=!0},clickRowDeleteButton:function(e){this.delete([e])},delete:function(e){var t=this;c["a"].confirm("\n                确定删除以下仓库吗？ <br>\n                [ ".concat(e.map(function(e){return e.name}).join(",")," ]\n            ")).then(function(){return t.$ajax.request(o["a"].warehouse.warDelete,{ids:e.map(function(e){return e.id}).join(",")})}).then(function(e){c["a"].toastSuccess(e),t.refreshData()})}},watch:{},computed:{}},S=C,T=(i("7851"),Object(F["a"])(S,a,n,!1,null,"48ab9946",null));t["default"]=T.exports},f359:function(e,t,i){},f8d6:function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"WarehouseSelector"},[i("el-cascader",{style:{width:e.width},attrs:{value:e.selectArray,placeholder:e.isFilter?"全部":e.plcText,options:e.tree,props:{value:"id",label:"name"},"change-on-select":e.isFilter},on:{change:e.itemChange}})],1)},n=[],s=(i("6762"),i("2fdb"),i("1812")),r=i("8f16"),o={name:"WarehouseSelector",components:{},props:{value:{default:0},isFilter:{default:!1},level:{default:1},visible:{default:!0},width:{default:"200px"},filterIds:{default:function(){return[]}},needFilter:{default:!1}},data:function(){return{warehouses:[],reservoirs:[],stocks:[],tree:[],selectArray:[]}},mounted:function(){this.reload()},methods:{reload:function(){this.refreshList(),this.change(this.isFilter?0:null)},change:function(e){this.$emit("input",e)},refreshList:function(){var e=this;this.$ajax.request(s["a"].warehouse.warSelectAll).then(function(t){if(e.warehouses=t,e.level>1)return e.$ajax.request(s["a"].warehouse.resSelectAll)}).then(function(t){if(e.reservoirs=t,e.level>2)return e.$ajax.request(s["a"].warehouse.stockSelectAll)}).then(function(t){e.stocks=t}).finally(function(){return e.createTree()})},createTree:function(){var e=this;this.tree=r["a"].listToTreeByTwoList(this.warehouses,r["a"].listToTreeByTwoList(this.reservoirs,this.stocks,"reservoirId"),"warehouseId"),this.isFilter?this.tree=[{id:0,name:"全部"}].concat(this.tree):(this.needFilter||this.filterIds.length)&&(this.tree=r["a"].filterTree(this.tree,function(t){return e.filterIds.includes(t.id)},"children",3)),this.refreshSelect()},refreshSelect:function(){var e=this;this.selectArray=r["a"].getTreeRoute(this.tree,function(t){return t.id===e.value},"id","children",this.level)},itemChange:function(e){!this.isFilter&&e.length<this.level||(this.$emit("input",e.length!==this.level?0:e[e.length-1]),this.$emit("change",e))}},watch:{visible:function(e){e&&this.refreshList()},value:function(){this.refreshSelect()},filterIds:function(){this.createTree()}},computed:{valueUse:function(){return this.value?this.value:this.isFilter?0:null},plcText:function(){return"请选择"+["仓库","仓位","货架"][this.level-1]}}},l=o,c=(i("d60c"),i("2877")),u=Object(c["a"])(l,a,n,!1,null,"afa1b522",null);t["a"]=u.exports},fe0a:function(e,t,i){"use strict";var a=i("b13f"),n=i.n(a);n.a}}]);
//# sourceMappingURL=chunk-0f92a9bc.e4df2de6.js.map