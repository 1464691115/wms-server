(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-761983bc"],{1877:function(e,t,a){},"73b5":function(e,t,a){"use strict";a.d(t,"a",function(){return n});var i=a("d225"),r=a("bd86"),n=(a("5701"),function e(){Object(i["a"])(this,e),Object(r["a"])(this,"createUid",0),Object(r["a"])(this,"updateUid",0),Object(r["a"])(this,"createTime",""),Object(r["a"])(this,"updateTime",""),Object(r["a"])(this,"createUserName",""),Object(r["a"])(this,"updateUserName","")})},"77ea":function(e,t,a){},b248:function(e,t,a){"use strict";a.d(t,"a",function(){return u});var i=a("d225"),r=a("308d"),n=a("6bb5"),s=a("013f"),c=a("4e2b"),o=a("bd86"),l=a("da3a"),u=function(e){function t(){var e,a;Object(i["a"])(this,t);for(var c=arguments.length,l=new Array(c),u=0;u<c;u++)l[u]=arguments[u];return a=Object(r["a"])(this,(e=Object(n["a"])(t)).call.apply(e,[this].concat(l))),Object(o["a"])(Object(s["a"])(a),"id",0),Object(o["a"])(Object(s["a"])(a),"materialId",0),Object(o["a"])(Object(s["a"])(a),"quantity",0),Object(o["a"])(Object(s["a"])(a),"lastInTime",""),Object(o["a"])(Object(s["a"])(a),"lastOutTime",""),Object(o["a"])(Object(s["a"])(a),"lastInQuantity",0),Object(o["a"])(Object(s["a"])(a),"lastOutQuantity",0),Object(o["a"])(Object(s["a"])(a),"materialCode",""),Object(o["a"])(Object(s["a"])(a),"materialName",""),Object(o["a"])(Object(s["a"])(a),"mtlUnitName",""),a}return Object(c["a"])(t,e),t}(l["a"])},d60c:function(e,t,a){"use strict";var i=a("77ea"),r=a.n(i);r.a},da3a:function(e,t,a){"use strict";a.d(t,"a",function(){return u});var i=a("d225"),r=a("308d"),n=a("6bb5"),s=a("013f"),c=a("4e2b"),o=a("bd86"),l=a("73b5"),u=function(e){function t(){var e,a;Object(i["a"])(this,t);for(var c=arguments.length,l=new Array(c),u=0;u<c;u++)l[u]=arguments[u];return a=Object(r["a"])(this,(e=Object(n["a"])(t)).call.apply(e,[this].concat(l))),Object(o["a"])(Object(s["a"])(a),"warehouseId",0),Object(o["a"])(Object(s["a"])(a),"reservoirId",0),Object(o["a"])(Object(s["a"])(a),"stockId",0),Object(o["a"])(Object(s["a"])(a),"warehouseName",""),Object(o["a"])(Object(s["a"])(a),"reservoirName",""),Object(o["a"])(Object(s["a"])(a),"stockName",""),Object(o["a"])(Object(s["a"])(a),"warehouseCode",""),Object(o["a"])(Object(s["a"])(a),"reservoirCode",""),Object(o["a"])(Object(s["a"])(a),"stockCode",""),a}return Object(c["a"])(t,e),t}(l["a"])},e68c:function(e,t,a){"use strict";var i=a("1877"),r=a.n(i);r.a},f7eb:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"InventorySearchView flex-box flex-column"},[a("search-card-layout",{on:{"click-search":e.refreshData}},[a("div",{staticClass:"flex-box search-card"},[a("div",{},[a("span",[e._v("物料名称")]),a("el-input",{model:{value:e.filterForm.materialName,callback:function(t){e.$set(e.filterForm,"materialName",t)},expression:"filterForm.materialName"}})],1),a("div",{},[a("span",[e._v("仓库货架")]),a("warehouse-selector",{attrs:{"is-filter":!0,level:3},on:{change:e.warehouseChange}})],1)])]),a("div",{staticClass:"flex-grow"},[a("table-panel",{attrs:{loading:e.loading,data:e.data,paginate:e.paginate,"operate-width":"80",selectedRow:e.selectedRow,"create-user-show":!0,"update-user-show":!0,"show-all-warehouse":!0,"operate-show":!1,"show-selection":!1},on:{"update:selectedRow":function(t){e.selectedRow=t},"update:selected-row":function(t){e.selectedRow=t},"sort-change":e.sortChange},scopedSlots:e._u([{key:"operate",fn:function(t){var i=t.row;return[a("el-button-mini",{attrs:{type:"text",icon:"edit"},nativeOn:{click:function(t){return e.clickRowEditButton(i)}}}),a("el-button-mini",{attrs:{type:"text",icon:"delete"},nativeOn:{click:function(t){return e.clickRowDeleteButton(i)}}})]}}])},[a("el-table-column",{attrs:{prop:"id",label:"ID",sortable:"custom",width:"80"}}),a("el-table-column",{attrs:{prop:"materialId",label:"物料编号",sortable:"custom",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(e._s(a.materialCode))]}}])}),a("el-table-column",{attrs:{prop:"materialId",label:"物料名称",sortable:"custom",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(e._s(a.materialName))]}}])}),a("el-table-column",{attrs:{prop:"quantity",label:"库存数量",sortable:"custom",width:"120"}}),a("el-table-column",{attrs:{prop:"mtlUnitName",label:"单位",sortable:"custom",width:"80"}})],1)],1)],1)},r=[],n=a("cebc"),s=a("b4d6"),c=a("41a2"),o=a("b248"),l=a("7f0d"),u=a("1812"),h=a("f8d6"),d=a("9960"),f=a("461d"),b={name:"InventorySearchView",components:{TablePanel:f["a"],ElButtonMini:d["a"],WarehouseSelector:h["a"],SearchCardLayout:s["a"]},props:{},data:function(){return{loading:!1,showAddDialog:!1,filterForm:new o["a"],data:[],paginate:new l["a"](this.refreshData),selectedRow:[],sortingColumn:null,editId:0}},mounted:function(){this.reload()},methods:{reload:function(){this.refreshData()},refreshData:function(){var e=this;this.loading=!0,this.$ajax.request(u["a"].inventory.list,Object(n["a"])({},c["a"].getSortField(this.sortingColumn),this.paginate.getJSON(),this.filterForm)).then(function(t){e.data=t.list,e.paginate.setPaginate(t)}).finally(function(){return e.loading=!1})},sortChange:function(e){this.sortingColumn=e,this.refreshData()},clickAddButton:function(){this.editId=0,this.showAddDialog=!0},clickEditButton:function(){this.editId=this.selectedRow[0].id,this.showAddDialog=!0},clickDeleteButton:function(){this.delete(this.selectedRow)},clickRowEditButton:function(e){this.editId=e.id,this.showAddDialog=!0},clickRowDeleteButton:function(e){this.delete([e])},warehouseChange:function(e){var t=e.length;this.filterForm.warehouseId=t>0?e[0]:0,this.filterForm.reservoirId=t>1?e[1]:0,this.filterForm.stockId=t>2?e[2]:0}},watch:{},computed:{}},m=b,w=(a("e68c"),a("2877")),v=Object(w["a"])(m,i,r,!1,null,"0395bb82",null);t["default"]=v.exports},f8d6:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"WarehouseSelector"},[a("el-cascader",{style:{width:e.width},attrs:{value:e.selectArray,placeholder:e.isFilter?"全部":e.plcText,options:e.tree,props:{value:"id",label:"name"},"change-on-select":e.isFilter},on:{change:e.itemChange}})],1)},r=[],n=(a("6762"),a("2fdb"),a("1812")),s=a("8f16"),c={name:"WarehouseSelector",components:{},props:{value:{default:0},isFilter:{default:!1},level:{default:1},visible:{default:!0},width:{default:"200px"},filterIds:{default:function(){return[]}},needFilter:{default:!1}},data:function(){return{warehouses:[],reservoirs:[],stocks:[],tree:[],selectArray:[]}},mounted:function(){this.reload()},methods:{reload:function(){this.refreshList(),this.change(this.isFilter?0:null)},change:function(e){this.$emit("input",e)},refreshList:function(){var e=this;this.$ajax.request(n["a"].warehouse.warSelectAll).then(function(t){if(e.warehouses=t,e.level>1)return e.$ajax.request(n["a"].warehouse.resSelectAll)}).then(function(t){if(e.reservoirs=t,e.level>2)return e.$ajax.request(n["a"].warehouse.stockSelectAll)}).then(function(t){e.stocks=t}).finally(function(){return e.createTree()})},createTree:function(){var e=this;this.tree=s["a"].listToTreeByTwoList(this.warehouses,s["a"].listToTreeByTwoList(this.reservoirs,this.stocks,"reservoirId"),"warehouseId"),this.isFilter?this.tree=[{id:0,name:"全部"}].concat(this.tree):(this.needFilter||this.filterIds.length)&&(this.tree=s["a"].filterTree(this.tree,function(t){return e.filterIds.includes(t.id)},"children",3)),this.refreshSelect()},refreshSelect:function(){var e=this;this.selectArray=s["a"].getTreeRoute(this.tree,function(t){return t.id===e.value},"id","children",this.level)},itemChange:function(e){!this.isFilter&&e.length<this.level||(this.$emit("input",e.length!==this.level?0:e[e.length-1]),this.$emit("change",e))}},watch:{visible:function(e){e&&this.refreshList()},value:function(){this.refreshSelect()},filterIds:function(){this.createTree()}},computed:{valueUse:function(){return this.value?this.value:this.isFilter?0:null},plcText:function(){return"请选择"+["仓库","仓位","货架"][this.level-1]}}},o=c,l=(a("d60c"),a("2877")),u=Object(l["a"])(o,i,r,!1,null,"afa1b522",null);t["a"]=u.exports}}]);
//# sourceMappingURL=chunk-761983bc.fb14b5e2.js.map