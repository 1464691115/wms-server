(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-23c734fd"],{"44d8":function(e,t,i){},"531e":function(e,t,i){"use strict";var a=i("7446"),r=i.n(a);r.a},"558e":function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"ElButtonCurdGroup"},[i("el-button-group",[i("el-button-mini",{attrs:{icon:"add",disabled:e.addDisabled},nativeOn:{click:function(t){return e.$emit("click-add")}}},[e._v("添加")]),i("el-button-mini",{attrs:{icon:"edit",disabled:e.editDisabled},nativeOn:{click:function(t){return e.$emit("click-edit")}}},[e._v("编辑")]),i("el-button-mini",{attrs:{icon:"delete",disabled:e.deleteDisabled},nativeOn:{click:function(t){return e.$emit("click-delete")}}},[e._v("删除")])],1),e._t("default")],2)},r=[],n=i("9960"),s={name:"ElButtonCurdGroup",components:{ElButtonMini:n["a"]},props:{addDisabled:{default:!1},editDisabled:{default:!1},deleteDisabled:{default:!1}},data:function(){return{}},mounted:function(){this.reload()},methods:{reload:function(){}},watch:{},computed:{}},o=s,l=(i("fe0a"),i("2877")),c=Object(l["a"])(o,a,r,!1,null,"c8b3903c",null);t["a"]=c.exports},"73b5":function(e,t,i){"use strict";i.d(t,"a",function(){return n});var a=i("d225"),r=i("bd86"),n=(i("5701"),function e(){Object(a["a"])(this,e),Object(r["a"])(this,"createUid",0),Object(r["a"])(this,"updateUid",0),Object(r["a"])(this,"createTime",""),Object(r["a"])(this,"updateTime",""),Object(r["a"])(this,"createUserName",""),Object(r["a"])(this,"updateUserName","")})},7446:function(e,t,i){},"77ea":function(e,t,i){},"7f7f":function(e,t,i){var a=i("86cc").f,r=Function.prototype,n=/^\s*function ([^ (]*)/,s="name";s in r||i("9e1e")&&a(r,s,{configurable:!0,get:function(){try{return(""+this).match(n)[1]}catch(e){return""}}})},b13f:function(e,t,i){},ba1f:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"ReservoirManagerView flex-box flex-column"},[i("search-card-layout",{attrs:{loading:e.loading},on:{"click-search":e.refreshData}},[i("div",{staticClass:"flex-box search-card"},[i("div",{},[i("span",[e._v("库位编号")]),i("el-input",{model:{value:e.filterForm.code,callback:function(t){e.$set(e.filterForm,"code",t)},expression:"filterForm.code"}})],1),i("div",{},[i("span",[e._v("库位名称")]),i("el-input",{model:{value:e.filterForm.name,callback:function(t){e.$set(e.filterForm,"name",t)},expression:"filterForm.name"}})],1),i("div",{},[i("span",[e._v("所属仓库")]),i("warehouse-selector",{attrs:{level:1,"is-filter":!0},model:{value:e.filterForm.warehouseId,callback:function(t){e.$set(e.filterForm,"warehouseId",t)},expression:"filterForm.warehouseId"}})],1)]),i("el-button-curd-group",{attrs:{slot:"buttons","delete-disabled":!e.selectedRow.length,"edit-disabled":1!==e.selectedRow.length},on:{"click-add":e.clickAddButton,"click-edit":e.clickEditButton,"click-delete":e.clickDeleteButton},slot:"buttons"})],1),i("div",{staticClass:"flex-grow"},[i("table-panel",{attrs:{loading:e.loading,data:e.data,paginate:e.paginate,"operate-width":"80",selectedRow:e.selectedRow,"create-user-show":!0,"update-user-show":!0},on:{"update:selectedRow":function(t){e.selectedRow=t},"update:selected-row":function(t){e.selectedRow=t},"sort-change":e.sortChange},scopedSlots:e._u([{key:"operate",fn:function(t){var a=t.row;return[i("el-button-mini",{attrs:{type:"text",icon:"edit"},nativeOn:{click:function(t){return e.clickRowEditButton(a)}}}),i("el-button-mini",{attrs:{type:"text",icon:"delete"},nativeOn:{click:function(t){return e.clickRowDeleteButton(a)}}})]}}])},[i("el-table-column",{attrs:{prop:"id",label:"ID",sortable:"custom",width:"80"}}),i("el-table-column",{attrs:{prop:"code",label:"库区编码",sortable:"custom",width:"120"}}),i("el-table-column",{attrs:{prop:"name",label:"库区名称",sortable:"custom",width:"160"}}),i("el-table-column",{attrs:{prop:"warehouseId",label:"所属仓库",sortable:"custom",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[e._v(e._s(i.warehouseName))]}}])}),i("el-table-column",{attrs:{prop:"remark",label:"备注",sortable:"custom","show-overflow-tooltip":!0,width:"200"}})],1)],1),i("reservoir-add-dialog",{attrs:{"edit-id":e.editId,visible:e.showAddDialog},on:{finish:e.refreshData,"update:visible":function(t){e.showAddDialog=t}}})],1)},r=[],n=(i("7f7f"),i("cebc")),s=i("b4d6"),o=i("705a"),l=i("1812"),c=i("41a2"),u=i("c80a"),d=i("7f0d"),h=i("f8d6"),f=i("9960"),b=i("461d"),m=i("558e"),v=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"ReservoirAddDialog"},[i("el-dialog",{attrs:{visible:e.visible,width:"300px",title:e.editId?"编辑 "+e.reservoirs.id:"新增"},on:{"update:visible":e.showDialog}},[i("el-form",{attrs:{"label-position":"top"}},[i("el-form-item",{attrs:{label:"库区编号"}},[i("el-input",{attrs:{type:"text"},model:{value:e.reservoirs.code,callback:function(t){e.$set(e.reservoirs,"code",t)},expression:"reservoirs.code"}})],1),i("el-form-item",{attrs:{label:"库区名称"}},[i("el-input",{attrs:{type:"text"},model:{value:e.reservoirs.name,callback:function(t){e.$set(e.reservoirs,"name",t)},expression:"reservoirs.name"}})],1),i("el-form-item",{attrs:{label:"所属仓库"}},[i("warehouse-selector",{attrs:{level:1,"is-filter":!1,visible:e.visible},model:{value:e.reservoirs.warehouseId,callback:function(t){e.$set(e.reservoirs,"warehouseId",t)},expression:"reservoirs.warehouseId"}})],1),i("el-form-item",{attrs:{label:"备注"}},[i("el-input",{attrs:{type:"textarea"},model:{value:e.reservoirs.remark,callback:function(t){e.$set(e.reservoirs,"remark",t)},expression:"reservoirs.remark"}})],1)],1),i("div",{staticClass:"mt-md"},[i("el-button-submit",{attrs:{loading:e.loading,size:"small"},nativeOn:{click:function(t){return e.clickSubmit(t)}}},[e._v("\n                保存提交\n            ")])],1)],1)],1)},p=[],w=i("b5d0"),g={name:"ReservoirAddDialog",components:{WarehouseSelector:h["a"],ElButtonSubmit:w["a"]},props:{visible:{default:!1},editId:{default:0}},data:function(){return{reservoirs:new u["a"],loading:!1}},mounted:function(){this.reload()},methods:{reload:function(){},showDialog:function(e){this.$emit("update:visible",e)},refreshData:function(){var e=this;if(!this.editId)return this.reservoirs=new u["a"];this.loading=!0,this.$ajax.request(l["a"].warehouse.resGetById,{id:this.editId}).then(function(t){e.reservoirs=t}).finally(function(){return e.loading=!1})},clickSubmit:function(){var e=this,t=this.editId?l["a"].warehouse.resUpdate:l["a"].warehouse.resInsert;this.loading=!0,this.$ajax.request(t,this.reservoirs).then(function(t){o["a"].toastSuccess(t),e.showDialog(!1),e.$emit("finish")}).finally(function(){return e.loading=!1})}},watch:{visible:function(e){e&&this.refreshData()}},computed:{}},k=g,j=(i("531e"),i("2877")),O=Object(j["a"])(k,v,p,!1,null,"7cc614d5",null),x=O.exports,D={name:"ReservoirManagerView",components:{ReservoirAddDialog:x,ElButtonCurdGroup:m["a"],TablePanel:b["a"],ElButtonMini:f["a"],WarehouseSelector:h["a"],SearchCardLayout:s["a"]},props:{},data:function(){return{loading:!1,showAddDialog:!1,filterForm:new u["a"],data:[],paginate:new d["a"](this.refreshData),selectedRow:[],sortingColumn:null,editId:0}},mounted:function(){this.reload()},methods:{reload:function(){this.refreshData()},refreshData:function(){var e=this;this.loading=!0,this.$ajax.request(l["a"].warehouse.resList,Object(n["a"])({},c["a"].getSortField(this.sortingColumn),this.paginate.getJSON(),this.filterForm)).then(function(t){e.data=t.list,e.paginate.setPaginate(t)}).finally(function(){return e.loading=!1})},sortChange:function(e){this.sortingColumn=e,this.refreshData()},clickAddButton:function(){this.editId=0,this.showAddDialog=!0},clickEditButton:function(){this.editId=this.selectedRow[0].id,this.showAddDialog=!0},clickDeleteButton:function(){this.delete(this.selectedRow)},clickRowEditButton:function(e){this.editId=e.id,this.showAddDialog=!0},clickRowDeleteButton:function(e){this.delete([e])},delete:function(e){var t=this;o["a"].confirm("\n                确定删除以下库区吗？ <br>\n                [ ".concat(e.map(function(e){return e.name}).join(",")," ]\n            ")).then(function(){return t.$ajax.request(l["a"].warehouse.resDelete,{ids:e.map(function(e){return e.id}).join(",")})}).then(function(e){o["a"].toastSuccess(e),t.refreshData()})}},watch:{},computed:{}},I=D,$=(i("e643"),Object(j["a"])(I,a,r,!1,null,"4b41b56a",null));t["default"]=$.exports},c80a:function(e,t,i){"use strict";i.d(t,"a",function(){return u});var a=i("d225"),r=i("308d"),n=i("6bb5"),s=i("013f"),o=i("4e2b"),l=i("bd86"),c=i("73b5"),u=function(e){function t(){var e,i;Object(a["a"])(this,t);for(var o=arguments.length,c=new Array(o),u=0;u<o;u++)c[u]=arguments[u];return i=Object(r["a"])(this,(e=Object(n["a"])(t)).call.apply(e,[this].concat(c))),Object(l["a"])(Object(s["a"])(i),"id",0),Object(l["a"])(Object(s["a"])(i),"code",""),Object(l["a"])(Object(s["a"])(i),"warehouseId",0),Object(l["a"])(Object(s["a"])(i),"name",""),Object(l["a"])(Object(s["a"])(i),"remark",""),Object(l["a"])(Object(s["a"])(i),"warehouseName",""),i}return Object(o["a"])(t,e),t}(c["a"])},d60c:function(e,t,i){"use strict";var a=i("77ea"),r=i.n(a);r.a},e643:function(e,t,i){"use strict";var a=i("44d8"),r=i.n(a);r.a},f8d6:function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"WarehouseSelector"},[i("el-cascader",{style:{width:e.width},attrs:{value:e.selectArray,placeholder:e.isFilter?"全部":e.plcText,options:e.tree,props:{value:"id",label:"name"},"change-on-select":e.isFilter},on:{change:e.itemChange}})],1)},r=[],n=(i("6762"),i("2fdb"),i("1812")),s=i("8f16"),o={name:"WarehouseSelector",components:{},props:{value:{default:0},isFilter:{default:!1},level:{default:1},visible:{default:!0},width:{default:"200px"},filterIds:{default:function(){return[]}},needFilter:{default:!1}},data:function(){return{warehouses:[],reservoirs:[],stocks:[],tree:[],selectArray:[]}},mounted:function(){this.reload()},methods:{reload:function(){this.refreshList(),this.change(this.isFilter?0:null)},change:function(e){this.$emit("input",e)},refreshList:function(){var e=this;this.$ajax.request(n["a"].warehouse.warSelectAll).then(function(t){if(e.warehouses=t,e.level>1)return e.$ajax.request(n["a"].warehouse.resSelectAll)}).then(function(t){if(e.reservoirs=t,e.level>2)return e.$ajax.request(n["a"].warehouse.stockSelectAll)}).then(function(t){e.stocks=t}).finally(function(){return e.createTree()})},createTree:function(){var e=this;this.tree=s["a"].listToTreeByTwoList(this.warehouses,s["a"].listToTreeByTwoList(this.reservoirs,this.stocks,"reservoirId"),"warehouseId"),this.isFilter?this.tree=[{id:0,name:"全部"}].concat(this.tree):(this.needFilter||this.filterIds.length)&&(this.tree=s["a"].filterTree(this.tree,function(t){return e.filterIds.includes(t.id)},"children",3)),this.refreshSelect()},refreshSelect:function(){var e=this;this.selectArray=s["a"].getTreeRoute(this.tree,function(t){return t.id===e.value},"id","children",this.level)},itemChange:function(e){!this.isFilter&&e.length<this.level||(this.$emit("input",e.length!==this.level?0:e[e.length-1]),this.$emit("change",e))}},watch:{visible:function(e){e&&this.refreshList()},value:function(){this.refreshSelect()},filterIds:function(){this.createTree()}},computed:{valueUse:function(){return this.value?this.value:this.isFilter?0:null},plcText:function(){return"请选择"+["仓库","仓位","货架"][this.level-1]}}},l=o,c=(i("d60c"),i("2877")),u=Object(c["a"])(l,a,r,!1,null,"afa1b522",null);t["a"]=u.exports},fe0a:function(e,t,i){"use strict";var a=i("b13f"),r=i.n(a);r.a}}]);
//# sourceMappingURL=chunk-23c734fd.06c81d9c.js.map